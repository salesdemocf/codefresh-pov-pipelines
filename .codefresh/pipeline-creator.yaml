version: '1.0'

stages:
  - clone
  - create

steps:
  clone:
    title: Cloning repository...
    type: git-clone
    repo: ${{CF_OWNER}}/${{CF_REPO_NAME}}
    revision: ${{CF_REVISION}}
    stage: clone

  create_pipeline:
    type: pipeline-trigger-merge
    title: Creating pipeline...
    working_directory: ${{clone}}/specifications
    arguments:
      SPEC: example-shared-ci-cd-spec.yaml
      ONLY_CHANGED: true
      TRIGGERS_SUBDIR: triggers
    stage: create